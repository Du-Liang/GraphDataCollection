#!/usr/bin/env python
# -*- coding: UTF-8 -*-

# 完成vulnerability表中type为3的数据的填充

import MySQLdb
import json
import sys
import os

db = MySQLdb.connect(
    host = "localhost", port = 3306, user = "root", 
    passwd = "123456", db = "net_test", charset = "utf8"
    )

cursor = db.cursor()

def err_log():
    print "error"
    error_info = sys.exc_info()
    if len(error_info) > 1:
        print(str(error_info[0]) + ' ' + str(error_info[1]))

try:
    cursor.execute("""
    select cveId, count(*) as count from vulnerability group by cveId having count > 1;
    """)
    data = cursor.fetchall()
    count = 0
    for item in data:
        count += 1
        print item[1]
    print count
except:
    err_log()

db.close()
